<!DOCTYPE html><html lang="th"><head><base href="https://lovepage-premium-card.netlify.app/"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏¥‡πä‡∏Å ‚ù§Ô∏è</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet"> <style>
        /* --- CORE STYLES --- */
        :root {
            --primary-color: #d65a5a; /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ï‡∏∏‡πà‡∏ô */
            --bg-color: #fff9f9;      /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ä‡∏°‡∏û‡∏π‡∏à‡∏≤‡∏á */
            --text-color: #4a4a4a;    /* ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ */
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Sarabun', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            height: 100vh; width: 100vw;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color);
            font-style: italic;
        }

        /* --- STAGE SYSTEM --- */
        .stage {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center;
            opacity: 0; pointer-events: none;
            transition: opacity 1.5s ease-in-out;
            /* background: var(--bg-color);  <-- ‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢ */
            padding: 20px; box-sizing: border-box;
            z-index: 10; /* ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à */
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏¢‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Stage 1 ‡∏ö‡∏±‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
        #stage-1 {
            background: var(--bg-color);
            z-index: 20;
        }

        .stage.active { opacity: 1; pointer-events: all; }

        /* --- BACKGROUND HEARTS (NEW) --- */
        .heart-bg-container {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            overflow: hidden; pointer-events: none;
            z-index: 1; /* ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
            opacity: 0; transition: opacity 2s;
        }
        .float-heart {
            position: absolute; bottom: -100px;
            color: var(--primary-color);
            opacity: 0.5;
            animation: floatUp linear infinite;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* --- STAGE 1: INTRO --- */
        .heart-btn {
            background: var(--primary-color);
            width: 80px; height: 80px;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(214, 90, 90, 0.4);
            animation: heartbeat 1.5s infinite;
            border: none; color: white; font-size: 24px;
            margin-top: 20px; transition: transform 0.2s;
        }
        .heart-btn:active { transform: scale(0.9); }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* --- STAGE 2: TIMELINE --- */
        .timeline-container {
            width: 100%; max-width: 400px; height: 60vh;
            overflow-y: auto; position: relative;
            padding-left: 20px; padding-right: 10px;
            text-align: left; scroll-behavior: smooth;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏±‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à */
            background: rgba(255, 249, 249, 0.85); 
            border-radius: 15px; padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .timeline-container::-webkit-scrollbar { width: 5px; }
        .timeline-container::-webkit-scrollbar-thumb { background: #ddd; border-radius: 10px; }

        .timeline-item {
            position: relative; padding-left: 30px;
            margin-bottom: 40px; border-left: 2px solid #ddd;
        }
        .timeline-item::before {
            content: '‚ô•'; position: absolute; left: -11px; top: 0;
            background: var(--bg-color); color: var(--primary-color); font-size: 20px;
        }
        .date-label { font-size: 0.9em; color: #888; font-weight: 600; }
        .timeline-img {
            width: 100%; border-radius: 10px; margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* --- STAGE 3: REAL-TIME CLOCK --- */
        .beating-heart-icon {
            font-size: 40px; color: var(--primary-color);
            margin-bottom: 10px; animation: heartbeat 1.2s infinite;
        }
        .timer-container {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 15px; margin-top: 20px; width: 100%; max-width: 320px;
        }
        .time-box {
            background: rgba(255, 255, 255, 0.9); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡∏ô‡∏¥‡∏î‡πÜ */
            padding: 15px; border-radius: 15px;
            box-shadow: 0 5px 15px rgba(214, 90, 90, 0.1);
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0; transform: scale(0.8);
        }
        .time-value {
            font-size: 2rem; font-weight: bold;
            color: var(--primary-color); font-family: 'Playfair Display', serif;
            font-variant-numeric: tabular-nums;
        }
        .time-label { font-size: 0.7rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        
        @keyframes popIn { to { opacity: 1; transform: scale(1); } }

        /* --- STAGE 4: MESSAGE & TYPEWRITER --- */
        .final-msg {
            background: rgba(255, 255, 255, 0.95); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 85%; max-width: 400px;
            position: relative; overflow: visible;
            min-height: 300px; display: flex; flex-direction: column;
        }
        .typewriter-text {
            font-family: 'Mali', 'Sarabun', 'Noto Sans Thai', sans-serif;  line-height: 1.8;
            text-align: left; font-size: 1rem; color: #555;
            padding-top: 10px;
            flex-grow: 1;
        }
        .cursor {
            display: inline-block; width: 2px; height: 1.2em;
            background-color: var(--primary-color);
            margin-left: 2px;
            vertical-align: middle;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* --- UTILS --- */
        .next-btn {
            background: rgba(255, 255, 255, 0.8); border: 1px solid var(--primary-color);
            color: var(--primary-color); padding: 10px 30px;
            border-radius: 30px; margin-top: 25px; cursor: pointer;
            transition: all 0.3s; font-family: 'Sarabun', sans-serif;
            font-weight: bold;
        }
        .next-btn:hover { background: var(--primary-color); color: white; }
        #player { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }
    </style>
</head><body><div id="heart-bg" class="heart-bg-container"></div><div id="stage-1" class="stage active"><h3>Valentine's Day</h3><h1 style="font-size: 2.5rem; line-height: 1.2;">Kik üíï<br>The Story üíò</h1><p style="color:#888;"></p><button class="heart-btn" onclick="startExperience()"><i style="font-style: normal;">‚ô•</i></button><p style="font-size: 0.8rem; margin-top: 15px; opacity: 0.6;">Tap heart to start</p></div><div id="stage-2" class="stage"><h2 style="margin-bottom: 20px;">ü§ç</h2><div class="timeline-container"><div class="timeline-item"><div class="date-label">12 november 2025</div><div>‡πÄ‡∏£‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏•‡∏ü‡πå‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà11 ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 12 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô ‡∏ã‡∏∂‡πâ‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÄ‡∏£‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ñ‡πà‡πÅ‡∏õ‡πä‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÇ‡∏î‡∏ô‡∏ï‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå‡∏°‡∏≤‡∏Å ‡πÜ</div><img src="https://firebasestorage.googleapis.com/v0/b/lovepage-wedding-images.firebasestorage.app/o/wedding_uploads%2F1770297935829_35iy3x5.jpg?alt=media&token=8376fcf0-181f-415b-9aeb-290761607e65" class="timeline-img"></div><div class="timeline-item"><div class="date-label">25 December 2025</div><div>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™ ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå‡∏°‡∏≤‡∏™‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡πç‡∏≤‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡∏Å‡πÜ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏¥‡πâ‡∏° ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç </div><img src="https://firebasestorage.googleapis.com/v0/b/lovepage-wedding-images.firebasestorage.app/o/wedding_uploads%2F1770298340478_x2k9yto.jpg?alt=media&token=57620586-306e-4e7d-a6f4-7849889ddb9e" class="timeline-img"></div><div class="timeline-item"><div class="date-label">12 December 2025</div><div>‡πÄ‡∏£‡∏≤‡∏ä‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠‡∏°‡∏≤‡∏Å ‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ß‡∏ß‡∏ï‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡πÜ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ò‡∏≠ ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏™‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÅ‡∏Ñ‡πà‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ò‡∏≠‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ä‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á</div><img src="https://firebasestorage.googleapis.com/v0/b/lovepage-wedding-images.firebasestorage.app/o/wedding_uploads%2F1770300198345_tjy88r0.jpg?alt=media&token=2a39740f-433f-4242-8735-6d0691610163" class="timeline-img"></div><div class="timeline-item"><div class="date-label">31 December 2025</div><div>‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏ò‡∏≠‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤ ‡πÄ‡∏£‡∏≤‡∏ä‡∏≠‡∏ö‡∏°‡∏≤‡∏Å‡πÜ ‡πÄ‡∏ò‡∏≠‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å‡πÜ‡πÜ‡πÜ‡πÜ‡πÜ ‡πÄ‡∏ò‡∏≠‡∏™‡∏ß‡∏¢‡∏à‡∏ô‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏∞‡∏´‡∏≤‡∏Ñ‡∏≥‡πÑ‡∏´‡∏ô‡∏°‡∏≤‡∏ä‡∏° ‡πÄ‡∏£‡∏≤‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏•‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ò‡∏≠‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏î‡∏π</div><img src="https://firebasestorage.googleapis.com/v0/b/lovepage-wedding-images.firebasestorage.app/o/wedding_uploads%2F1770298221476_iz2ptig.jpg?alt=media&token=afc4aaf1-e2e3-42bc-875b-f36f0af43518" class="timeline-img"></div></div><button class="next-btn" onclick="goToStage(3)">See Time Moving</button></div><div id="stage-3" class="stage"><div class="beating-heart-icon">‚ô•</div><h2 style="margin-top:0;">Time together ü•∞</h2><p style="color:#999; margin-bottom:20px; font-size: 0.9rem;">‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏ò‡∏≠ ‡πÄ‡∏£‡∏≤‡πÅ‡∏Æ‡πä‡∏õ‡∏õ‡∏µ‡πâ‡∏°‡πä‡∏≤‡∏Å‡∏Å‡∏Å‡∏Å</p><div class="timer-container"><div class="time-box" style="animation-delay: 0.1s;"><div class="time-value" id="days">0</div><div class="time-label">Days</div></div><div class="time-box" style="animation-delay: 0.2s;"><div class="time-value" id="hours">0</div><div class="time-label">Hours</div></div><div class="time-box" style="animation-delay: 0.3s;"><div class="time-value" id="minutes">0</div><div class="time-label">Minutes</div></div><div class="time-box" style="animation-delay: 0.4s;"><div class="time-value" id="seconds">0</div><div class="time-label">Seconds</div></div></div><button class="next-btn" onclick="goToStage(4)" style="margin-top: 40px;">Read Message</button></div><div id="stage-4" class="stage"><div class="final-msg"><h2>Happy Valentine's day ü©∑</h2><div id="typewriter-area" class="typewriter-text"></div><div style="text-align: right; margin-top: auto; font-weight: bold; color: var(--primary-color);">- ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡πâ‡∏≤‡πÄ‡∏≠‡∏á Art üôáüèº‚Äç‚ôÇÔ∏è -</div></div><button class="next-btn" style="margin-top:20px;" onclick="location.reload()">Replay</button></div><div id="player"></div> <script>
        // ================= CONFIGURATION =================            
        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2024 ‡πÄ‡∏ß‡∏•‡∏≤ 09:09:00
        const START_DATE = new Date("2025-11-12T09:29:00"); 
        const FINAL_MESSAGE = `‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏∏‡∏ì kikkkk<br><br>‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå‡∏õ‡∏µ‡∏ô‡∏µ‡πâ ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å ‡πÜ ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÜ ‡πÄ‡∏ò‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡∏°‡∏≤‡∏Å‡∏Å‡∏Å‡∏Å‡∏Å
 ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÄ‡∏à‡∏≠‡πÅ‡∏ï‡πà‡∏Ñ‡∏ô‡πÉ‡∏à‡∏î‡∏µ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢
‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏°‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏°
‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡∏•‡∏∑‡∏°‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å‡πÜ‡πÜ‡πÜ‡πÜ‡πÜ‡πÜ‡πÜ ü§ç`;
        const CUSTOM_YOUTUBE_URL = "https://youtu.be/Q49pnA4jsp8?si=-yYkK-X_zPhoAdfb";

        // ================= SYSTEM LOGIC =================
        
        function extractVideoID(url) {
            var match = url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);
            return (match && match[7].length == 11) ? match[7] : false;
        }

        var player;
        const VIDEO_ID = extractVideoID(CUSTOM_YOUTUBE_URL);

        function onYouTubeIframeAPIReady() {
            if(VIDEO_ID) {
                player = new YT.Player('player', {
                    height: '0', width: '0', videoId: VIDEO_ID,
                    playerVars: { 'playsinline': 1, 'controls': 0, 'loop': 1, 'playlist': VIDEO_ID }
                });
            }
        }
        
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function startExperience() {
            if(player && player.playVideo) {
                player.playVideo();
                player.setVolume(60);
            }
            initFloatingHearts(); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢
            goToStage(2);
        }

        function goToStage(stageNum) {
            document.querySelectorAll('.stage').forEach(el => el.classList.remove('active'));
            document.getElementById(`stage-${stageNum}`).classList.add('active');

            if (stageNum === 3) startTimer();
            if (stageNum === 4) startTypewriter();
        }

        // --- NEW: Floating Hearts Logic ---
        function initFloatingHearts() {
            const container = document.getElementById('heart-bg');
            container.style.opacity = '1'; // ‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏ü‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
            
            const heartCount = 20; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
            
            for (let i = 0; i < heartCount; i++) {
                createHeart(container);
            }
        }

        function createHeart(container) {
            const heart = document.createElement('div');
            heart.classList.add('float-heart');
            heart.innerText = '‚ô•';
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î
            const size = Math.random() * 20 + 10; // 10px ‡∏ñ‡∏∂‡∏á 30px
            const left = Math.random() * 100;
            const duration = Math.random() * 5 + 5; // 5 ‡∏ñ‡∏∂‡∏á 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            const delay = Math.random() * 5;

            heart.style.left = left + 'vw';
            heart.style.fontSize = size + 'px';
            heart.style.animationDuration = duration + 's';
            heart.style.animationDelay = '-' + delay + 's'; // ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏µ‡πÇ‡∏ó‡∏ô‡∏ä‡∏°‡∏û‡∏π/‡πÅ‡∏î‡∏á
            const colors = ['#d65a5a', '#ff9a9e', '#fad0c4', '#ffecd2'];
            heart.style.color = colors[Math.floor(Math.random() * colors.length)];

            container.appendChild(heart);
        }

        // --- Logic Stage 3: Timer ---
        let timerInterval;
        function startTimer() {
            if(timerInterval) clearInterval(timerInterval);
            
            function update() {
                const now = new Date();
                const diff = now - START_DATE;

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((diff / 1000 / 60) % 60);
                const seconds = Math.floor((diff / 1000) % 60);

                document.getElementById('days').innerText = days;
                document.getElementById('hours').innerText = hours;
                document.getElementById('minutes').innerText = minutes;
                document.getElementById('seconds').innerText = seconds;
            }
            timerInterval = setInterval(update, 1000);
            update(); 
        }

        // --- Logic Stage 4: Typewriter ---
let isTyping = false;

function startTypewriter() {
    if (isTyping) return;
    isTyping = true;

    const target = document.getElementById('typewriter-area');
    target.innerHTML = '<span class="cursor"></span>';

    const speed = 60;

    // ‡πÅ‡∏¢‡∏Å HTML tag ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å text
    const parts = FINAL_MESSAGE.match(/(<[^>]+>|[^<]+)/g) || [];

    const segmenter = new Intl.Segmenter('th', { granularity: 'grapheme' });

    let partIndex = 0;
    let charIndex = 0;
    let currentSegments = [];

    function type() {
        if (partIndex >= parts.length) return;

        const cursor = target.querySelector('.cursor');
        const part = parts[partIndex];

        // --- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô HTML tag (<br>, <b> ‡∏Ø‡∏•‡∏Ø) ---
        if (part.startsWith('<')) {
            cursor.insertAdjacentHTML('beforebegin', part);
            partIndex++;
            charIndex = 0;
            setTimeout(type, speed);
            return;
        }

        // --- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô text ‡∏õ‡∏Å‡∏ï‡∏¥ ---
        if (charIndex === 0) {
            currentSegments = [...segmenter.segment(part)];
        }

        if (charIndex < currentSegments.length) {
            cursor.insertAdjacentText(
                'beforebegin',
                currentSegments[charIndex].segment
            );
            charIndex++;
            setTimeout(type, speed);
        } else {
            partIndex++;
            charIndex = 0;
            setTimeout(type, speed);
        }
    }

    setTimeout(type, 500);
}

</script> </body></html>